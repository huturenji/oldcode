(window.webpackJsonp=window.webpackJsonp||[]).push([[4],Array(104).concat([function(e,t,n){e.exports=n.p+"static/img/img_Viewfinder.934f914.png"},function(e,t,n){var a={"./0/register.png":123,"./1/register.png":124,"./10/register.png":125,"./2/register.png":126,"./3/register.png":127,"./4/register.png":128,"./5/register.png":129,"./6/register.png":130,"./7/register.png":131,"./8/register.png":132,"./9/register.png":133};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=105},,,function(e,t,n){"use strict";var a=n(139),i=n.n(a),r=n(102),s=n.n(r),c=n(103),o=n.n(c),p=n(35),u=n.n(p),g=n(15),f=n.n(g),l=n(36),d=n.n(l),v=n(37),m=n.n(v),h=function(){function e(){d()(this,e),this.cameraInterval=null,this.qrTimer=null,this.PREVIEW_OPTIONS=[300,139,0,0],this.takenPhotoing=!1,this.isShow=!1,this.options={}}var t,n,a,r,c,p;return m()(e,[{key:"init",value:function(e){var t=this;return this.options=e,this.options.defaultCameraOption=JSON.parse(f()(this.options.cameraOptions)),new u.a((function(e,n){try{t.cameraInterval=setInterval(o()(s.a.mark((function n(){var a,i,r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ipcRenderer.sendSync("openDevice");case 2:if(0!=(a=n.sent)){n.next=13;break}return t.cameraInterval&&clearInterval(t.cameraInterval),n.next=7,t.createNativeWindow(t.options.cwnd);case 7:0==(i=n.sent)?(t.setDefaultOption(t.options.defaultCameraOption),e(i)):e(i),r=new CustomEvent("cameraInit",{detail:{created:!i}}),window.dispatchEvent(r),n.next=14;break;case 13:e(a);case 14:case"end":return n.stop()}}),n,t)}))),1500)}catch(t){e(-999)}}))}},{key:"createNativeWindow",value:(p=o()(s.a.mark((function e(t){var n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new u.a(function(){var e=o()(s.a.mark((function e(a,i){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ipcRenderer.sendSync("createNativeWindow",t||n.PREVIEW_OPTIONS);case 3:r=e.sent,a(r),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a(-999);case 10:case"end":return e.stop()}}),e,n,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"setDefaultOption",value:function(e){var t=this;["whitebalance","exposure"].forEach((function(n){var a=n+"_auto",i=e[a];1===i?t.setCameraOption(n,[e[n]]):t.setCameraOption(a,[i])}))}},{key:"setOption",value:function(e){for(key in i()(this.options.cameraOption,e),this.options.cameraOption)this.setCameraOption(key,[this.options.cameraOption[key]])}},{key:"resetOption",value:function(){var e=this.options.cameraOption,t=this.options.defaultCameraOption;for(var n in e)if(Object.hasOwnProperty.call(e,n)){var a=t[n];a!=e[n]&&(e[n]=a,this.setCameraOption(n,[a]))}}},{key:"setCameraOption",value:function(e,t){ipcRenderer.sendSync("setCameraOption",{type:e,value:t})}},{key:"getPhoto",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"captured_image.jpg";return this.takenPhotoing=!0,new u.a((e=o()(s.a.mark((function e(a,i){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ipcRenderer.sendSync("takePhoto",n);case 3:r=e.sent,t.takenPhotoing=!1,0==r?(setTimeout((function(){t.hide()}),250),a(r)):(t.hide(),a(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(-999);case 11:case"end":return e.stop()}}),e,t,[[0,8]])}))),function(t,n){return e.apply(this,arguments)}))}},{key:"getQRPhoto",value:function(e){var t,n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"preview_temp.jpg";return new u.a((t=o()(s.a.mark((function e(t,i){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ipcRenderer.sendSync("takePhoto",a);case 3:if(0!=(r=e.sent)){e.next=8;break}t(r),e.next=11;break;case 8:return e.next=10,n.close();case 10:t(r);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t(-999);case 16:case"end":return e.stop()}}),e,n,[[0,13]])}))),function(e,n){return t.apply(this,arguments)}))}},{key:"transmitInit",value:function(){}},{key:"reflexInit",value:function(){return this.getQRFromImage()}},{key:"getQRFromImage",value:(c=o()(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new u.a(function(){var e=o()(s.a.mark((function e(n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.takenPhotoing){e.next=18;break}return e.prev=1,e.next=4,t.getQRPhoto("preview_temp.jpg");case 4:if(0!=e.sent){e.next=13;break}return e.next=8,ipcRenderer.sendSync("parseQrCodeImage","preview_temp.jpg");case 8:if(a=e.sent,!t.takenPhotoing){e.next=12;break}return n(""),e.abrupt("return");case 12:a&&0==a.code&&a.data&&a.data.content?n(a.data.content):n("");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),n("");case 18:case"end":return e.stop()}}),e,t,[[1,15]])})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"close",value:(r=o()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cameraInterval&&clearInterval(this.cameraInterval),e.next=3,this.hide();case 3:return e.next=5,ipcRenderer.sendSync("closeNativeWindow");case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"show",value:(a=o()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ipcRenderer.sendSync("showChildWindow");case 2:this.isShow=!0;case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"hide",value:(n=o()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ipcRenderer.sendSync("hideChildWindow");case 2:this.isShow=!1;case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"open",value:(t=o()(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}();t.a=new h},function(e,t,n){"use strict";var a=n(36),i=n.n(a),r=n(37),s=n.n(r),c=function(){function e(){i()(this,e)}return s()(e,[{key:"getScanIndex",value:function(e,t){return!isNaN(parseFloat(e))&&isFinite(e)?e%10+1:t%10+1}}]),e}();t.a=new c},function(e,t,n){var a={"./0/register_fuzzy.png":111,"./1/register_fuzzy.png":112,"./10/register_fuzzy.png":113,"./2/register_fuzzy.png":114,"./3/register_fuzzy.png":115,"./4/register_fuzzy.png":116,"./5/register_fuzzy.png":117,"./6/register_fuzzy.png":118,"./7/register_fuzzy.png":119,"./8/register_fuzzy.png":120,"./9/register_fuzzy.png":121};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=110},function(e,t,n){e.exports=n.p+"static/img/register_fuzzy.88d17c4.png"},function(e,t,n){e.exports=n.p+"static/img/register_fuzzy.1560c71.png"},function(e,t,n){e.exports=n.p+"static/img/register_fuzzy.d627447.png"},function(e,t,n){e.exports=n.p+"static/img/register_fuzzy.e3a5687.png"},function(e,t,n){e.exports=n.p+"static/img/register_fuzzy.2f418b0.png"},function(e,t,n){e.exports=n.p+"static/img/register_fuzzy.af9153b.png"},function(e,t,n){e.exports=n.p+"static/img/register_fuzzy.9d79fc3.png"},function(e,t,n){e.exports=n.p+"static/img/register_fuzzy.047e5a6.png"},function(e,t,n){e.exports=n.p+"static/img/register_fuzzy.4dad4c3.png"},function(e,t,n){e.exports=n.p+"static/img/register_fuzzy.5ca2d44.png"},function(e,t,n){e.exports=n.p+"static/img/register_fuzzy.d2d3742.png"},function(e,t,n){e.exports=n.p+"static/img/index.5591751.png"},function(e,t,n){e.exports=n.p+"static/img/register.e45094e.png"},function(e,t,n){e.exports=n.p+"static/img/register.158ad13.png"},function(e,t,n){e.exports=n.p+"static/img/register.46458bb.png"},function(e,t,n){e.exports=n.p+"static/img/register.5ef6238.png"},function(e,t,n){e.exports=n.p+"static/img/register.0ca7e0e.png"},function(e,t,n){e.exports=n.p+"static/img/register.5b013ed.png"},function(e,t,n){e.exports=n.p+"static/img/register.cd818a2.png"},function(e,t,n){e.exports=n.p+"static/img/register.94d033f.png"},function(e,t,n){e.exports=n.p+"static/img/register.6cf305a.png"},function(e,t,n){e.exports=n.p+"static/img/register.dab4d32.png"},function(e,t,n){e.exports=n.p+"static/img/register.b86f0bc.png"},,,,,,,function(e,t,n){var a={"./0/verify.png":159,"./1/verify.png":160,"./10/verify.png":161,"./2/verify.png":162,"./3/verify.png":163,"./4/verify.png":164,"./5/verify.png":165,"./6/verify.png":166,"./7/verify.png":167,"./8/verify.png":168,"./9/verify.png":169};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=140},,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){e.exports={default:n(157),__esModule:!0}},function(e,t,n){n(40),n(38),e.exports=n(158)},function(e,t,n){var a=n(3),i=n(60);e.exports=n(2).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}},function(e,t,n){e.exports=n.p+"static/img/verify.53ff192.png"},function(e,t,n){e.exports=n.p+"static/img/verify.1560c71.png"},function(e,t,n){e.exports=n.p+"static/img/verify.d627447.png"},function(e,t,n){e.exports=n.p+"static/img/verify.e3a5687.png"},function(e,t,n){e.exports=n.p+"static/img/verify.2f418b0.png"},function(e,t,n){e.exports=n.p+"static/img/verify.af9153b.png"},function(e,t,n){e.exports=n.p+"static/img/verify.9d79fc3.png"},function(e,t,n){e.exports=n.p+"static/img/verify.047e5a6.png"},function(e,t,n){e.exports=n.p+"static/img/verify.4dad4c3.png"},function(e,t,n){e.exports=n.p+"static/img/verify.5ca2d44.png"},function(e,t,n){e.exports=n.p+"static/img/verify.d2d3742.png"},function(e,t,n){var a={"./0/verify_scan.png":171,"./1/verify_scan.png":172,"./10/verify_scan.png":173,"./2/verify_scan.png":174,"./3/verify_scan.png":175,"./4/verify_scan.png":176,"./5/verify_scan.png":177,"./6/verify_scan.png":178,"./7/verify_scan.png":179,"./8/verify_scan.png":180,"./9/verify_scan.png":181};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=170},function(e,t,n){e.exports=n.p+"static/img/verify_scan.6d6ae3c.png"},function(e,t,n){e.exports=n.p+"static/img/verify_scan.61b79fe.png"},function(e,t,n){e.exports=n.p+"static/img/verify_scan.b0fb659.png"},function(e,t,n){e.exports=n.p+"static/img/verify_scan.e08e6b5.png"},function(e,t,n){e.exports=n.p+"static/img/verify_scan.dd76577.png"},function(e,t,n){e.exports=n.p+"static/img/verify_scan.17c27dc.png"},function(e,t,n){e.exports=n.p+"static/img/verify_scan.97d605b.png"},function(e,t,n){e.exports=n.p+"static/img/verify_scan.ecf01e6.png"},function(e,t,n){e.exports=n.p+"static/img/verify_scan.6047ced.png"},function(e,t,n){e.exports=n.p+"static/img/verify_scan.d68ff13.png"},function(e,t,n){e.exports=n.p+"static/img/verify_scan.f63599f.png"},function(e,t,n){var a={"./0/success.png":183,"./1/success.png":184,"./10/success.png":185,"./2/success.png":186,"./3/success.png":187,"./4/success.png":188,"./5/success.png":189,"./6/success.png":190,"./7/success.png":191,"./8/success.png":192,"./9/success.png":193,"./verify/success.png":194};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=182},function(e,t,n){e.exports=n.p+"static/img/success.6285af3.png"},function(e,t,n){e.exports=n.p+"static/img/success.b17eda8.png"},function(e,t,n){e.exports=n.p+"static/img/success.a1fc085.png"},function(e,t,n){e.exports=n.p+"static/img/success.68238b2.png"},function(e,t,n){e.exports=n.p+"static/img/success.26a2541.png"},function(e,t,n){e.exports=n.p+"static/img/success.703570f.png"},function(e,t,n){e.exports=n.p+"static/img/success.61ceb38.png"},function(e,t,n){e.exports=n.p+"static/img/success.ac83890.png"},function(e,t,n){e.exports=n.p+"static/img/success.dacc9c3.png"},function(e,t,n){e.exports=n.p+"static/img/success.faf9ec6.png"},function(e,t,n){e.exports=n.p+"static/img/success.518578f.png"},function(e,t,n){e.exports=n.p+"static/img/success.6285af3.png"},function(e,t,n){var a={"./0/fail.png":196,"./1/fail.png":197,"./10/fail.png":198,"./2/fail.png":199,"./3/fail.png":200,"./4/fail.png":201,"./5/fail.png":202,"./6/fail.png":203,"./7/fail.png":204,"./8/fail.png":205,"./9/fail.png":206,"./verify/fail.png":207};function i(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}i.keys=function(){return Object.keys(a)},i.resolve=r,e.exports=i,i.id=195},function(e,t,n){e.exports=n.p+"static/img/fail.d509003.png"},function(e,t,n){e.exports=n.p+"static/img/fail.3380441.png"},function(e,t,n){e.exports=n.p+"static/img/fail.ba2057c.png"},function(e,t,n){e.exports=n.p+"static/img/fail.f8b1c9a.png"},function(e,t,n){e.exports=n.p+"static/img/fail.52873ad.png"},function(e,t,n){e.exports=n.p+"static/img/fail.1a95e16.png"},function(e,t,n){e.exports=n.p+"static/img/fail.a8b0ddb.png"},function(e,t,n){e.exports=n.p+"static/img/fail.3c52a24.png"},function(e,t,n){e.exports=n.p+"static/img/fail.7ec6cee.png"},function(e,t,n){e.exports=n.p+"static/img/fail.30b0d38.png"},function(e,t,n){e.exports=n.p+"static/img/fail.b3eff0f.png"},function(e,t,n){e.exports=n.p+"static/img/fail.d509003.png"},,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(156),i=n.n(a),r=n(35),s=n.n(r),c=n(102),o=n.n(c),p=n(103),u=n.n(p),g=(n(134),n(135),n(136)),f=n.n(g),l=n(108),d=n(109),v=n(42),m={components:{headBreadcrumb:function(){return n.e(0).then(n.bind(null,217))},namedcomp:function(){return n.e(2).then(n.bind(null,218))}},data:function(){return{bisType:"verify",title:"注册纸纹",bisTitle:"核验纸纹",tagNum:"0000001",tagName:"",PREVIEW_OPTIONS:[570,139,480,360],haveCamera:!1,inputDisabled:!0,optionsWrapShow:!1,bisRuning:!1,coveImgData:n(104),register_scan_base_img:null,verify_scan_base_img:null,scanLight:null,fadeAway:!1,registerImgData:null,timer:null,haveQrCode:null,appEnv:{},localAssetsPreStr:"../../../../",detailUrl:null,sourceTypeName:"凭证",verifyBtn:"核验",interval:null,interval_animate:null,interval_result:null,active:!1,scanPromise:null,scanIndex:0,zoomStyle:window.devicePixelRatio>=1.5,verifyPromise:null,animationPoint:[],labelId:0}},created:function(){},mounted:function(){this.getAppEnv(),this.deviceInit()},beforeDestroy:function(){console.log("close verify timer"),this.timer&&clearInterval(this.timer),f.a.closeAll(),l.a.close()},watch:{tagName:function(e,t){this.active=e&&e.trim()&&this.haveCamera,this.handleInput(e)}},methods:{getAppEnv:function(){sessionStorage.getItem("appEnv")&&(this.appEnv=JSON.parse(sessionStorage.getItem("appEnv")),this.localAssetsPreStr=this.appEnv.isPackaged?"../../../../":"../../"),this.appEnv.preview_model?this.PREVIEW_OPTIONS=[570,139,480,360]:this.PREVIEW_OPTIONS=[570,139,0,0]},deviceInit:function(){var e=this;return u()(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return window.addEventListener("cameraInit",(function(t){t.detail.created&&e.bisInit()})),t.next=3,l.a.init({cwnd:e.PREVIEW_OPTIONS,cameraOptions:e.appEnv.defaultCameraOptions});case 3:0==t.sent?e.bisInit():e.alert("未发现纸纹仪，请检查设备是否正常","warning");case 5:case"end":return t.stop()}}),t,e)})))()},bisInit:function(){var e=this;return u()(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.haveCamera=!0,e.inputDisabled=!1,!e.appEnv.use_perspective){t.next=6;break}l.a.transmitInit(),t.next=12;break;case 6:return t.next=8,l.a.reflexInit();case 8:n=t.sent,e.tagName=e.tagName||n,e.timer=setInterval(u()(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.a.reflexInit();case 2:n=t.sent,e.tagName=e.tagName||n;case 4:case"end":return t.stop()}}),t,e)}))),5e3),e.tagName?f.a.closeAll():f()({message:"请把纸纹仪对准"+e.sourceTypeName,type:"warning",duration:3e3});case 12:case"end":return t.stop()}}),t,e)})))()},btnCallback:function(){var e=this;return u()(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.closeAnimation(),!e.appEnv.preview_model){t.next=4;break}return t.next=4,l.a.show();case 4:setTimeout((function(){e.bisRuning=!1,e.verifyBtn="核验",e.inputDisabled=!1}),100);case 5:case"end":return t.stop()}}),t,e)})))()},verify:function(){var e=this;return u()(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l.a.takenPhotoing&&!e.bisRuning){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,l.a.takenPhotoing=!0,t.t0=!e.haveCamera,!t.t0){t.next=10;break}return t.next=8,l.a.init(e.PREVIEW_OPTIONS);case 8:return t.next=10,t.sent;case 10:if(!e.haveCamera){t.next=24;break}if(e.tagName.trim().length){t.next=15;break}return f()({message:"请输入"+e.sourceTypeName+"号",type:"warning"}),l.a.takenPhotoing=!1,t.abrupt("return");case 15:if(e.active){t.next=19;break}return f()({message:"您输入的"+e.sourceTypeName+"号未注册，请输入正确的"+e.sourceTypeName+"号",type:"warning"}),l.a.takenPhotoing=!1,t.abrupt("return");case 19:return e.bisRuning=!0,t.next=22,l.a.getPhoto("captured_image.jpg");case 22:0==t.sent?(e.appEnv.preview_model?e.coveImgData=e.localAssetsPreStr+"captured_image.jpg?t="+(new Date).getTime():e.coveImgData=n(140)("./"+e.scanIndex+"/verify.png"),e.verifyBtn="核验中...",e.inputDisabled=!0,e.verify_scan_base_img=n(170)("./"+e.scanIndex+"/verify_scan.png"),e.register_scan_base_img=n(110)("./"+e.scanIndex+"/register_fuzzy.png"),e.scanLight=n(122),e.gradientWrapper=!0,e.verifyPromise=v.a.communication("verify",e.tagName),e.verifyReply()):(a={confirmButtonText:"确定",text:"<div  class='result warning'>核验失败，请确认纸纹仪是否连接正常</div>",type:"warning",center:!0,needRecord:!1,textUsedHtml:!0},e.confirm(a.confirmButtonText,a.text,a.type,e.btnCallback,a.center,"",a.textUsedHtml));case 24:t.next=33;break;case 26:t.prev=26,t.t1=t.catch(2),e.bisRuning=!1,e.verifyBtn="核验",e.inputDisabled=!1,l.a.takenPhotoing=!1,console.log(t.t1);case 33:case"end":return t.stop()}}),t,e,[[2,26]])})))()},verifyReply:function(){var e=this;return u()(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.getElementById("scanBaseImgWrap").addEventListener("animationend",e.animationendListener);case 2:case"end":return t.stop()}}),t,e)})))()},animationendListener:function(e){var t=this;this.scanLight=null,s.a.resolve(this.verifyPromise).then((function(a){t.fadeAway?(e.target.removeEventListener("animationend",t.animationendListener),t.runAnimate(t.animationPoint,t.verifyComfirm,{res:a})):(t.register_scan_base_img=n(105)("./"+t.scanIndex+"/register.png"),t.fadeAway=!0,l.a.takenPhotoing=!1,0==a.code&&0==a.data.result?(t.verify_scan_base_img=n(182)("./"+t.scanIndex+"/success.png"),t.animationPoint=t.generateRandomPoints(100,50,470,5,350,!0)):(t.verify_scan_base_img=n(195)("./"+t.scanIndex+"/fail.png"),t.animationPoint=t.generateRandomPoints(5,50,470,50,350,!1)),t.gradientWrapper=!1)}))},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},generateRandomPoints:function(e,t,n,a,i){for(var r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=this,c=[],o=0;o<e;o++){var p=s.getRandomInt(t,n),u=s.getRandomInt(a,i);c.push({x:p,y:u}),r?c.push({x:p+510,y:u}):c.push({x:p+510,y:(u+p)%360})}return c},runAnimate:function(e,t,n){var a=this,r=document.getElementById("myCanvas"),s=r.getContext("2d"),c=0;a.interval_animate=setInterval((function(){!function(){s.clearRect(0,0,r.width,r.height),s.strokeStyle="#4DFF00",s.beginPath();for(var o=0;o<c;o+=2)o<e.length-1&&(s.moveTo(e[o].x,e[o].y),s.lineTo(e[o+1].x,e[o+1].y));s.stroke(),s.fillStyle="#4DFF00";var p=!0,u=!1,g=void 0;try{for(var f,l=i()(e);!(p=(f=l.next()).done);p=!0){var d=f.value;s.beginPath(),s.arc(d.x,d.y,3,0,2*Math.PI),s.fill()}}catch(e){u=!0,g=e}finally{try{!p&&l.return&&l.return()}finally{if(u)throw g}}++c<e.length||(a.interval_animate&&clearInterval(a.interval_animate),setTimeout((function(){t&&t(n.res)}),500))}()}),1)},closeScan:function(){this.interval&&clearInterval(this.interval)},closeAnimation:function(){this.gradientWrapper=!1,this.fadeAway=!1,this.scanLight=null,this.register_scan_base_img=null,this.verify_scan_base_img=null,this.interval_result&&clearInterval(this.interval_result),this.interval_animate&&clearInterval(this.interval_animate);var e=document.getElementById("myCanvas");e.getContext("2d").clearRect(0,0,e.width,e.height)},verifyComfirm:function(e){var t=this;return u()(o.a.mark((function n(){var a,i,r;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a={0:{0:{confirmButtonText:"继续核验",text:"纸纹相符",type:"success",center:!0,needRecord:!0,textUsedHtml:!0},1:{confirmButtonText:"重新核验",text:"纸纹不符",type:"error",center:!0,needRecord:!0,textUsedHtml:!0}},2:{confirmButtonText:"重新核验",text:"系统未找到相应纸纹",type:"warning",center:!0,needRecord:!1,textUsedHtml:!0},"-1":{confirmButtonText:"重新核验",text:"核验失败，"+t.sourceTypeName+"解码失败",type:"warning",center:!0,needRecord:!1,textUsedHtml:!0},1:{confirmButtonText:"重新核验",text:"特征提取输入错误",type:"warning",center:!0,needRecord:!1,textUsedHtml:!0},12:{confirmButtonText:"重新核验",text:"图片中图像占比太小，请确认图片是否放置在正确问题",type:"warning",center:!0,needRecord:!1,textUsedHtml:!0},33:{confirmButtonText:"重新核验",text:"录入图像输入错误(signImage.data为NULL或signImage.dataLength为0）",type:"warning",center:!0,needRecord:!1,textUsedHtml:!0},34:{confirmButtonText:"重新核验",text:"核验图像输入错误(checkImage.data为NULL或checkImage.dataLength为0）",type:"warning",center:!0,needRecord:!1,textUsedHtml:!0},35:{confirmButtonText:"重新核验",text:"录入图像输入错误(signImage宽高输入有误）",type:"warning",center:!0,needRecord:!1,textUsedHtml:!0},36:{confirmButtonText:"重新核验",text:"核验图像输入错误(checkImage宽高输入有误）",type:"warning",center:!0,needRecord:!1,textUsedHtml:!0},37:{confirmButtonText:"重新核验",text:"特征匹配入参错误(录入或核验的特征数据为NULL）",type:"warning",center:!0,needRecord:!1,textUsedHtml:!0},38:{confirmButtonText:"重新核验",text:"特征提取入参错误(图像类型错误）",type:"warning",center:!0,needRecord:!1,textUsedHtml:!0},39:{confirmButtonText:"重新核验",text:"特征提取入参错误(图像数据宽高输入错误）",type:"warning",center:!0,needRecord:!1,textUsedHtml:!0}},!(i=0==e.code?a[e.code][e.data.result]:a[e.code]||null)){n.next=11;break}if(!i.needRecord){n.next=8;break}return n.next=6,t.getRegisterRecord(e.data.labelHash);case 6:(r=n.sent)&&(i.text="<div  class='result "+i.type+"'>"+i.text+"</div><div class='detail'><span style='margin-right:40px'>"+t.sourceTypeName+"号："+r.labelName+"</span><span>核验人员："+r.registerUserName+"</span></div>");case 8:"warning"==i.type&&(i.text="<div  class='result warning'>"+i.text+"</div>"),n.next=12;break;case 11:i={confirmButtonText:"重新核验",text:"<div  class='result warning'>系统未找到相应纸纹</div>",type:"warning",center:!0,needRecord:!1,textUsedHtml:!0};case 12:"error"==i.type?t.confirm(i.confirmButtonText,i.text,i.type,t.btnCallback,i.center,"",i.textUsedHtml,t.btnCallback,"确定",!0):t.confirm(i.confirmButtonText,i.text,i.type,t.btnCallback,i.center,"",i.textUsedHtml);case 13:case"end":return n.stop()}}),n,t)})))()},getRegisterRecord:function(e){var t=this;return u()(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new s.a(function(){var n=u()(o.a.mark((function n(a,i){var r,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={labelHash:e,pageSize:10,pageNumber:1},t.next=4,ipcRenderer.sendSync("register_search_record",r);case 4:"0"==(s=t.sent).code&&s.data&&s.data.pageList&&s.data.pageList.length>0&&a(s.data.pageList[0]),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),i();case 11:case"end":return t.stop()}}),n,t,[[0,8]])})));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}}),n,t)})))()},openOptionContent:function(){this.haveCamera?this.optionsWrapShow=!0:this.alert("未发现纸纹仪，请检查设备是否正常","warning")},closeOptionsContent:function(){this.optionsWrapShow=!1},reset:function(){for(var e in this.defaultOptions)if(Object.hasOwnProperty.call(this.defaultOptions,e)){var t=this.defaultOptions[e];t!=this.options[e]&&(this.options[e]=t,this.setCameraOption(e,[t]))}},alert:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"提示",r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.$alert(e,i,{confirmButtonText:"确定",type:t,center:a,dangerouslyUseHTMLString:r,callback:function(e){n&&n()}})},confirm:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success",a=arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments[7],c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"取消",o=arguments.length>9&&void 0!==arguments[9]&&arguments[9];this.$confirm(t,"",{confirmButtonText:e,showCancelButton:o,cancelButtonText:c,type:n,center:i,showClose:!1,dangerouslyUseHTMLString:r,customClass:"el_confirm",cancelButtonClass:"el_cancel_btn",confirmButtonClass:"el_ok_btn",closeOnClickModal:!1}).then((function(){a&&a()})).catch((function(){s&&s()}))},gotoBack:function(){this.$router.replace("/entry")},toggleBisType:function(){this.$router.replace("/register")},handleInput:function(e){var t=this;return u()(o.a.mark((function a(){var i,r;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.trim()&&t.haveCamera){a.next=4;break}return t.registerImgData=null,t.coveImgData=n(104),a.abrupt("return");case 4:return a.next=6,ipcRenderer.sendSync("register_search_record_precise",{labelName:e});case 6:"0"==(i=a.sent).code&&i.data&&i.data.pageList&&i.data.pageList.length>0?(t.labelId=i.data.pageList[0].labelId,t.appEnv.preview_model?(-1==(r=i.data.pageList[0].registerImg).indexOf("http")&&(r=t.localAssetsPreStr+r),t.registerImgData=r+"?t="+(new Date).getTime()):(t.scanIndex=d.a.getScanIndex(e,t.labelId),t.registerImgData=n(105)("./"+t.scanIndex+"/register.png"),t.coveImgData=n(140)("./"+t.scanIndex+"/verify.png")),t.active=!0):(t.active=!1,t.registerImgData=null,t.coveImgData=n(104));case 8:case"end":return a.stop()}}),a,t)})))()}}},h=n(34);var x=function(e){n(154),n(155)},y=Object(h.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"verifyWrap",class:{zoomStyle:e.zoomStyle}},[n("canvas",{staticStyle:{position:"absolute",top:"139px",left:"29px","z-index":"500"},attrs:{id:"myCanvas",width:"1020",height:"360"}}),e._v(" "),n("div",{staticClass:"card_box"},[n("headBreadcrumb",{attrs:{title:"首页",tips:e.title,showbtn:!1,bistips:e.bisTitle,bisType:e.bisType},on:{goback:e.gotoBack,registerFun:e.toggleBisType}}),e._v(" "),n("div",{staticClass:"contcentWrap",attrs:{"element-loading-text":e.loadingText,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.7)"}},[e._m(0),e._v(" "),n("div",{staticClass:"concent"},[n("div",{staticClass:"registerWrap",class:{gradientWrapper:e.gradientWrapper,fadeAway:e.fadeAway}},[n("div",{staticClass:"scanBaseImgWrap",attrs:{id:"scanBaseImgWrap"}},[e.register_scan_base_img?n("div",{staticClass:"scanBaseImg",style:{backgroundImage:"url("+e.register_scan_base_img+")"}}):e._e()]),e._v(" "),e.scanLight?n("img",{staticClass:"scan",attrs:{id:"scanLight",src:e.scanLight}}):e._e(),e._v(" "),e.registerImgData?n("div",{staticClass:"registerImg",style:{backgroundImage:"url("+e.registerImgData+")"}}):n("span",{staticClass:"registerTips"},[e._v("输入凭证号后，将显示注册图")])]),e._v(" "),n("p",{staticClass:"vertical-line"}),e._v(" "),n("div",{staticClass:"videoWrap"},[n("div",{staticClass:"videoContent",class:{gradientWrapper:e.gradientWrapper,fadeAway:e.fadeAway}},[n("div",{staticClass:"scanBaseImgWrap",attrs:{id:"scanBaseImgWrap"}},[e.verify_scan_base_img?n("div",{staticClass:"scanBaseImg",style:{backgroundImage:"url("+e.verify_scan_base_img+")"}}):e._e()]),e._v(" "),e.scanLight?n("img",{staticClass:"scan cameraScan",attrs:{id:"scanLight",src:e.scanLight}}):e._e(),e._v(" "),e.coveImgData?n("div",{style:{backgroundImage:"url("+e.coveImgData+")"},attrs:{id:"coveImg"}}):e._e(),e._v(" "),e.optionsWrapShow?n("div",{staticClass:"optionsWrap"},[n("div",{staticClass:"line"},[n("div",{staticClass:"label"},[e._v("曝光：")]),e._v(" "),n("el-slider",{staticClass:"slider",attrs:{min:-13,max:0,step:1},on:{change:function(t){e.setCameraOption("exposure",[t])}},model:{value:e.options.exposure,callback:function(t){e.$set(e.options,"exposure",t)},expression:"options.exposure"}}),e._v(" "),n("span",{staticClass:"sliderRightText"},[e._v(e._s(e.options.exposure))])],1),e._v(" "),n("div",{staticClass:"line"},[n("div",{staticClass:"label"},[e._v("自动曝光")]),e._v(" "),n("el-slider",{staticClass:"slider",attrs:{min:0,max:1,step:1},on:{change:function(t){e.setCameraOption("exposure_auto",[t])}},model:{value:e.options.exposure_auto,callback:function(t){e.$set(e.options,"exposure_auto",t)},expression:"options.exposure_auto"}}),e._v(" "),n("span",{staticClass:"sliderRightText"},[e._v(e._s(e.options.exposure_auto))])],1),e._v(" "),n("div",{staticClass:"line"},[n("div",{staticClass:"label"},[e._v("白平衡")]),e._v(" "),n("el-slider",{staticClass:"slider",attrs:{min:2700,max:6500,step:100},on:{change:function(t){e.setCameraOption("whitebalance",[t])}},model:{value:e.options.whitebalance,callback:function(t){e.$set(e.options,"whitebalance",t)},expression:"options.whitebalance"}}),e._v(" "),n("span",{staticClass:"sliderRightText"},[e._v(e._s(e.options.whitebalance))])],1),e._v(" "),n("div",{staticClass:"line"},[n("div",{staticClass:"label"},[e._v("自动白平衡")]),e._v(" "),n("el-slider",{staticClass:"slider",attrs:{min:0,max:1,step:1},on:{change:function(t){e.setCameraOption("whitebalance_auto",[t])}},model:{value:e.options.whitebalance_auto,callback:function(t){e.$set(e.options,"whitebalance_auto",t)},expression:"options.whitebalance_auto"}}),e._v(" "),n("span",{staticClass:"sliderRightText"},[e._v(e._s(e.options.whitebalance_auto))])],1),e._v(" "),n("div",{staticClass:"bottomBar"},[n("div",{staticClass:"reset",on:{click:function(t){return e.reset()}}},[e._v("重置")]),e._v(" "),n("div",{staticClass:"getList",on:{click:function(t){return e.closeOptionsContent()}}},[e._v("确认")])])]):e._e()])]),e._v(" "),n("div",{staticClass:"formArea"},[n("namedcomp",{attrs:{compName:e.sourceTypeName+"号"}},[n("div",{attrs:{slot:"component"},slot:"component"},[n("el-input",{staticClass:"formAreaInpurt",attrs:{clearable:"",maxlength:"50",disabled:e.inputDisabled,placeholder:"请输入"+e.sourceTypeName+"号（必填）"},on:{input:function(t){return e.handleInput(t)}},model:{value:e.tagName,callback:function(t){e.tagName="string"==typeof t?t.trim():t},expression:"tagName"}})],1)])],1),e._v(" "),n("div",{staticClass:"bisBottomBar"},[n("div",{staticClass:"bisButton",class:{active:e.active},on:{click:function(t){return e.verify()}}},[e._v(e._s(e.verifyBtn))])])])])],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"textDiv"},[t("span",{staticClass:"register_span vspan"},[this._v("注册凭证")]),this._v(" "),t("span",{staticClass:"verify_span vspan"},[this._v("待测凭证")])])}],!1,x,"data-v-89fc6f04",null);t.default=y.exports}])]);